<!DOCTYPE html>
<html>

<head>
   <title>Login</title>

   <style>
      body {
         background: #0a0a23;
         height: 100vh;
         display: flex;
         justify-content: center;
         align-items: center;
         font-family: Arial;
      }

      .box {
         width: 400px;
         background: #020024;
         padding: 40px;
         border-radius: 10px;
         color: white;
      }

      input {
         width: 100%;
         padding: 10px;
         margin-bottom: 15px;
         background: transparent;
         border: none;
         border-bottom: 1px solid white;
         color: white;
      }

      button {
         width: 100%;
         padding: 10px;
         background: #03e9f4;
         border: none;
         cursor: pointer;
      }

      p {
         text-align: center;
      }

      a {
         color: #03e9f4;
      }
   </style>

</head>

<body>

   <div class="box">

      <h2>Portal Login</h2>

      <form id="loginForm">

         <input id="email" type="email" placeholder="Email" required>
         <input id="password" type="password" placeholder="Password" required>

         <button>Login</button>

         <p id="msg"></p>

         <p>
            Don't have account?
            <a href="signup.html">Create Account</a>
         </p>

      </form>

   </div>

   <script>
      document.getElementById("loginForm").addEventListener("submit", function (e) {
         e.preventDefault();

         fetch("http://127.0.0.1:5000/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
               email: email.value,
               password: password.value
            })
         })
            .then(res => res.json())
            .then(data => {
               if (data.status == "success") {
                  localStorage.setItem("email", email.value);

                  if (data.role == "ADMIN")
                     window.location = "admin_dashboard.html";
                  else
                     window.location = "user_dashboard.html";
               }

               else {
                  msg.innerText = "Invalid Login";
               }
            });
      });
   </script>

</body>

</html>